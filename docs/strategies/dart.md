# Dart

Dart ecosystem uses pub package manager to manage shared [packages and libraries](https://dart.dev/guides/packages). Packages can be sourced from [registry](https://pub.dev/), [git repository](https://dart.dev/tools/pub/dependencies#git-packages), or from [local file system](https://dart.dev/tools/pub/dependencies#path-packages). 

## Project Discovery

Find files named `pubspec.yaml`. 

## Analysis

We will attempt to perform all of the listed below, we 

| Preference | Strategy                                                                                        | Direct Deps        | Deep Deps          | Edges              |
| ---------- | ----------------------------------------------------------------------------------------------- | ------------------ | ------------------ | ------------------ |
| Highest    | `pubspec.yaml` and `pubspec.lock` are discovered, and `flutter pub deps --json` can be executed | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
|            | `pubspec.yaml` and `pubspec.lock` are discovered, and `dart pub deps --json` can be executed    | :heavy_check_mark: | :heavy_check_mark: | :heavy_check_mark: |
|            | `pubspec.yaml` and `pubspec.lock` are discovered                                                | :heavy_check_mark: | :x:                | :x:                |
| Lowest     | Only `pubspec.yaml` is discovered                                                               | :heavy_check_mark: | :x:                | :x:                |

Where, 

* :heavy_check_mark: - Supported in all projects
* :x: - Not Supported

### Limitations

* [Path dependencies](https://dart.dev/tools/pub/dependencies#path-packages) are not reported, and will be ignored in analyses.
* [Sdk dependencies](https://dart.dev/tools/pub/dependencies#sdk) are not supported, and will be ignored in analyses.

# Example 

Create new dart project by creating `pubspec.yaml` file.

```yaml
name: some_example
description: some example description
version: 1.0.0+1

environment:
  sdk: ">=2.0.0 <3.0.0"

dependencies:    
  path: ">= 1.2.0 <3.0.0"
  encrypt:
    git: https://github.com/leocavalcante/encrypt.git
  flutter:
    sdk: flutter
  provider: ^5.0.0
  quiver: any

flutter:
  uses-material-design: true
```

Execute `dart pub get` to retrieve packages from the spec file. When performed, it will create `pubspec.lock` file. 

```text 
# Generated by pub
# See https://dart.dev/tools/pub/glossary#lockfile
packages:
  args:
    dependency: transitive
    description:
      name: args
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.2.0"
  asn1lib:
    dependency: transitive
    description:
      name: asn1lib
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.2"
  characters:
    dependency: transitive
    description:
      name: characters
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  clock:
    dependency: transitive
    description:
      name: clock
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  collection:
    dependency: transitive
    description:
      name: collection
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.15.0"
  convert:
    dependency: transitive
    description:
      name: convert
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  crypto:
    dependency: transitive
    description:
      name: crypto
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  encrypt:
    dependency: "direct main"
    description:
      path: "."
      ref: HEAD
      resolved-ref: "267e516367eb05896787d5f461dc2a7dd564c044"
      url: "https://github.com/leocavalcante/encrypt.git"
    source: git
    version: "5.0.0"
  flutter:
    dependency: "direct main"
    description: flutter
    source: sdk
    version: "0.0.0"
  matcher:
    dependency: transitive
    description:
      name: matcher
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.12.10"
  meta:
    dependency: transitive
    description:
      name: meta
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.7.0"
  nested:
    dependency: transitive
    description:
      name: nested
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.0"
  path:
    dependency: "direct main"
    description:
      name: path
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.8.0"
  pointycastle:
    dependency: transitive
    description:
      name: pointycastle
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.1.3"
  provider:
    dependency: "direct main"
    description:
      name: provider
      url: "https://pub.dartlang.org"
    source: hosted
    version: "5.0.0"
  quiver:
    dependency: "direct main"
    description:
      name: quiver
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  sky_engine:
    dependency: transitive
    description: flutter
    source: sdk
    version: "0.0.99"
  stack_trace:
    dependency: transitive
    description:
      name: stack_trace
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.10.0"
  typed_data:
    dependency: transitive
    description:
      name: typed_data
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.3.0"
  vector_math:
    dependency: transitive
    description:
      name: vector_math
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
sdks:
  dart: ">=2.12.0 <3.0.0"
  flutter: ">=1.16.0"
```

After which, dependencies can be inspected using `dart pub deps -s compact`, or `dart pub deps --json` command. 

```text
Dart SDK 2.14.0-301.0.dev
Flutter SDK 2.4.0-4.0.pre
some_example 1.0.0+1

dependencies:
- encrypt 5.0.0 [args asn1lib clock collection crypto pointycastle]
- flutter 0.0.0 [characters collection meta typed_data vector_math sky_engine]
- path 1.8.0
- provider 5.0.0 [collection flutter nested]
- quiver 3.0.1 [matcher]

transitive dependencies:
- args 2.2.0
- asn1lib 1.0.2
- characters 1.1.0
- clock 1.1.0
- collection 1.15.0
- convert 3.0.1 [typed_data]
- crypto 3.0.1 [collection typed_data]
- matcher 0.12.10 [stack_trace]
- meta 1.7.0
- nested 1.0.0 [flutter]
- pointycastle 3.1.3 [collection convert]
- sky_engine 0.0.99
- stack_trace 1.10.0 [path]
- typed_data 1.3.0 [collection]
- vector_math 2.1.0
```

### References

* [Pub](https://dart.dev/tools/pub/cmd)
* [Dart](https://dart.dev/tools/pub/cmd)
* [Flutter](https://flutter.dev/)
